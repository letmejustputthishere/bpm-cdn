console.log("hello world");

let imageLinksDesktop = [
    "../images/01_LandingPage/01_Desktop/LandingPage_image_1.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_2.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_3.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_4.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_5.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_6.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_7.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_8.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_9.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_10.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_11.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_12.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_13.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_14.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_15.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_16.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_17.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_18.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_19.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_20.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_21.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_22.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_23.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_24.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_25.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_26.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_27.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_28.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_29.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_30.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_31.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_32.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_33.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_34.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_35.webp",
    "../images/01_LandingPage/01_Desktop/LandingPage_image_36.webp",
];
let projectLinks = [
    "project/item-magazin-4.html",
    "project/michael-mueller-catalogue-raisonné.html",
    "project/deutsches-historisches-museum.html",
    "project/kunstsaele-katalog.html",
    "project/operator-key.html",
    "project/am-abgrund-der-bilder.html",
    "project/item-magazin-3.html",
    "project/item-magazin-1.html",
    "project/waterslide.html",
    "project/am-abgrund-der-bilder.html",
    "project/item-magazin-1.html",
    "project/studio-michael-mueller-website.html",
    "project/studio-visit.html",
    "project/translate-cozy.html",
    "project/39null-magazin.html",
    "project/fpdao.html",
    "project/item-magazin-2.html",
    "project/item-magazin-1.html",
    "project/serif-dreaming.html",
    "project/kultur-in-nordrhein-westfalen.html",
    "project/studio-visit.html",
    "project/item-magazin-1.html",
    "project/xyz-design-festival.html",
    "project/item-magazin-3.html",
    "project/kultur-in-nordrhein-westfalen.html",
    "project/xyz-design-festival.html",
    "project/michael-mueller-catalogue-raisonné.html",
    "project/jenny-gleitsmann.html",
    "project/item-magazin-4.html",
    "project/deutsches-historisches-museum.html",
    "project/michael-mueller-catalogue-raisonné.html",
    "project/fpdao.html",
    "project/studio-michael-mueller-website.html",
    "project/wondertours.html",
    "project/waterslide.html",
    "project/item-magazin-4.html",
];
let imageLinksMobile = [
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_1.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_2.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_3.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_4.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_5.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_6.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_7.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_8.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_9.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_10.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_11.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_12.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_13.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_14.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_15.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_16.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_17.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_18.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_19.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_20.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_21.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_22.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_23.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_24.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_25.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_26.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_27.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_28.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_29.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_30.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_31.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_32.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_33.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_34.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_35.webp",
    "../images/01_LandingPage/02_Mobile/LandingPage_Mobile_image_36.webp",
];
function isTouchDevice() {
    return (
        "ontouchstart" in window ||
        navigator.maxTouchPoints > 0 ||
        navigator.msMaxTouchPoints > 0
    );
}
function isLandscape() {
    return window.innerWidth > window.innerHeight;
}

let currentIndex = 0;

let landscape = isLandscape();

// set initial background image according to the device width
// and touch capabilities
// prefetch other background images so they are read from cache
function setPage() {
    currentIndex = Math.floor(Math.random() * imageLinksDesktop.length);

    if ($("body").width() > 497) {
        // landscape iphones or ipads
        if (isTouchDevice()) {
            // make body scrollable
            $("body").css({
                height: "500vh",
                backgroundImage: "none",
                backgrundColor: "black",
            });
            // set background on background-wrap class instead of body
            // this css does not exist for width > 497, thus we set it manually
            $(".background-wrap").css({
                "background-image":
                    "url(" +
                    (landscape
                        ? imageLinksDesktop[currentIndex]
                        : imageLinksMobile[currentIndex]) +
                    ")",
                position: "fixed",
                left: "0%",
                top: "0%",
                right: "auto",
                bottom: "auto",
                zIndex: 0,
                width: "100vw",
                height: "100%",
                paddingRight: "0px",
                paddingBottom: "0px",
                backgroundPosition: "center",
                backgroundSize: "cover",
                backgroundRepeat: "no-repeat",
                backgroundAttachment: "fixed",
                cursor: "pointer",
            });
            // prefetch
            $(landscape ? imageLinksDesktop : imageLinksMobile).each(
                function () {
                    var image = $("<img />").attr("src", this);
                }
            );
            // normal desktop
        } else {
            $(".background-wrap").css({
                "background-image":
                    "url(" + imageLinksDesktop[currentIndex] + ")",
                position: "fixed",
                left: "0%",
                top: "0%",
                right: "auto",
                bottom: "auto",
                zIndex: 0,
                width: "100vw",
                height: "100%",
                paddingRight: "0px",
                paddingBottom: "0px",
                backgroundPosition: "center",
                backgroundSize: "cover",
                backgroundRepeat: "no-repeat",
                backgroundAttachment: "fixed",
                cursor: "pointer",
            });
            // $("body").css("background-image", "url(" + imageLinksDesktop[Math.floor(Math.random() * (imageLinksDesktop.length))] + ")");
            // prefetch
            $(imageLinksDesktop).each(function () {
                var image = $("<img />").attr("src", this);
            });
        }
        // mobile
    } else {
        $("body").css({
            height: "500vh",
            backgroundImage: "none",
            backgrundColor: "black",
        });
        // set background on background-wrap class instead of body
        $(".background-wrap").css({
            "background-image": "url(" + imageLinksMobile[currentIndex] + ")",
            position: "fixed",
            left: "0%",
            top: "0%",
            right: "auto",
            bottom: "auto",
            zIndex: 0,
            width: "100vw",
            height: "100%",
            paddingRight: "0px",
            paddingBottom: "0px",
            backgroundPosition: "center",
            backgroundSize: "cover",
            backgroundRepeat: "no-repeat",
            backgroundAttachment: "fixed",
            cursor: "pointer",
        });
        // prefetch
        $(imageLinksMobile).each(function () {
            var image = $("<img />").attr("src", this);
        });
    }

    // when image is clicked user is directed to the corresponding project page
    $(".background-wrap").click(function (event) {
        window.location = projectLinks[currentIndex];
    });
}

// add event listener
$(document).ready(function () {
    // desktop
    if (!isTouchDevice()) {
        $("body").mousemove(function (event) {
            let bodyWidth = $("body").width();
            let pageX = event.pageX;
            let sectionSize = bodyWidth / imageLinksDesktop.length;
            currentIndex = Math.floor(pageX / sectionSize);
            $(".background-wrap").css(
                "background-image",
                "url(" + imageLinksDesktop[currentIndex] + ")"
            );
            // when image is clicked user is directed to the corresponding project page
            $(".background-wrap").click(function (event) {
                window.location = projectLinks[currentIndex];
            });
        });
        // touch devices
    } else {
        $(window).scroll(function (event) {
            let bodyHeight = $("body").height() - $(window).height();
            let scrolledY = $(window).scrollTop();
            let sectionSize = Math.floor(
                bodyHeight / (imageLinksDesktop.length - 1)
            );
            currentIndex = Math.floor(scrolledY / sectionSize);

            if (landscape) {
                if (currentIndex >= 0) {
                    $(".background-wrap").css(
                        "background-image",
                        "url(" + imageLinksDesktop[currentIndex] + ")"
                    );
                }
            } else {
                console.log(currentIndex);
                if (currentIndex >= 0) {
                    $(".background-wrap").css(
                        "background-image",
                        "url(" + imageLinksMobile[currentIndex] + ")"
                    );
                }
            }
            // when image is clicked user is directed to the corresponding project page
            $(".background-wrap").click(function (event) {
                window.location = projectLinks[currentIndex];
            });
        });
    }
});

// register event handler
$(window).on("orientationchange", () => {
    landscape = !landscape;
    setPage();
});

setPage();
